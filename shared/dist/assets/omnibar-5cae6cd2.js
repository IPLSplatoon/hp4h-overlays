import{r as D,z as j,w as q,D as P,h as T,j as B,d as g,k as l,_ as O,x as b,o as _,c as $,m as w,q as f,e as y,s as S,t as p,b as c,B as G,f as U,l as K,p as Y,a as J,y as Q,T as V,C as X,H as Z,g as ee,i as te,v as ne,G as oe}from"./installCommonHelpers-978315d6.js";import{F as x,O as E,g as v}from"./FittedContent-54e37ee3.js";import{d as W}from"./index-aec42e4f.js";import{u as H,i as se}from"./activeRoundStore-29c594a9.js";import{_ as ae}from"./iconic-mark-d1a3d70a.js";import{i as ie}from"./casterStore-9842a80e.js";function L(e,t){return t+1===e.length?0:t+1}function F(e){return e.enabled==null||e.enabled.value}function ce(e){const t=D(null),a=D(null),d=()=>{if(e.every(n=>!F(n)))t.value=0,a.value=e[t.value].component;else{t.value=t.value==null?0:L(e,t.value);let n=e[t.value];for(;!F(n);)t.value=L(e,t.value),n=e[t.value];a.value=n.component}};let r;const m=()=>{if(t.value!=null){const n=e[t.value];r=window.setTimeout(()=>{d(),m()},(n.duration??30)*1e3)}};let o=!1;const i=n=>{const u=e.findIndex(s=>s.component===n);if(u===-1){console.warn(`Could not find slide ${n}`);return}const h=e[u];clearTimeout(r),o=!0,t.value=u,a.value=h.component,m()};return d(),m(),j(()=>{clearTimeout(r)}),q(()=>{var n;return t.value==null?!0:(n=e[t.value].enabled)==null?void 0:n.value},n=>{n===!1&&!o?(clearTimeout(r),d(),m()):o=!1}),{activeComponent:a,forceSetSlide:i}}function re(e){return[e==null?void 0:e.artist,e==null?void 0:e.song].filter(t=>!W.isBlank(t)).join(" - ")}const de=nodecg.Replicant("nowPlaying",P),ue=nodecg.Replicant("musicShown",P),A=T("music",{state:()=>({nowPlaying:{},musicShown:null})}),le=B([de,ue],A),me=g({name:"OmnibarMusic",components:{FittedContent:x,OpacitySwapTransition:E},setup(){const e=A();return{nowPlaying:l(()=>re(e.nowPlaying))}}});const pe={class:"lower-third-music"};function _e(e,t,a,d,r,m){const o=b("fitted-content"),i=b("opacity-swap-transition");return _(),$("div",pe,[w(i,null,{default:f(()=>[(_(),y(o,{key:e.nowPlaying,"max-width":1200,align:"center"},{default:f(()=>[S(p(e.nowPlaying),1)]),_:1}))]),_:1})])}const ve=O(me,[["render",_e]]),fe=nodecg.Replicant("nextRound",P),k=T("nextRound",{state:()=>({nextRound:null})}),he=B([fe],k),Se=g({name:"OmnibarNextRound",components:{FittedContent:x,OpacitySwapTransition:E},setup(){const e=k();return{teamA:l(()=>e.nextRound.teamA),teamB:l(()=>e.nextRound.teamB)}}});const we={class:"next-round-content-wrapper"},be={class:"team-name"},$e=c("span",{class:"versus"},"vs",-1),ge={class:"team-name"};function Oe(e,t,a,d,r,m){const o=b("fitted-content"),i=b("opacity-swap-transition");return _(),y(i,null,{default:f(()=>{var n,u;return[(_(),y(o,{key:`${(n=e.teamA)==null?void 0:n.name}_${(u=e.teamB)==null?void 0:u.name}`,"max-width":1200,align:"center"},{default:f(()=>{var h,s;return[c("div",we,[c("span",be,p(e.$helpers.addDots((h=e.teamA)==null?void 0:h.name)),1),$e,c("span",ge,p(e.$helpers.addDots((s=e.teamB)==null?void 0:s.name)),1)])]}),_:1}))]}),_:1})}const ye=O(Se,[["render",Oe]]),xe=g({name:"OmnibarActiveRound",components:{FittedContent:x,OpacitySwapTransition:E},setup(){const e=H(),t=l(()=>e.activeRound.teamA),a=l(()=>e.activeRound.teamB);return{teamA:t,teamB:a}}});const Re={class:"lower-third-active-round"},Ce={class:"team-name"},De={class:"scores"},Pe={class:"team-name"};function Ee(e,t,a,d,r,m){const o=b("fitted-content"),i=b("opacity-swap-transition");return _(),$("div",Re,[w(i,null,{default:f(()=>{var n,u;return[(_(),y(o,{key:`${(n=e.teamA)==null?void 0:n.name}_${(u=e.teamB)==null?void 0:u.name}`,"max-width":1200,align:"center"},{default:f(()=>{var h,s,R,M;return[c("span",Ce,p(e.$helpers.addDots((h=e.teamA)==null?void 0:h.name)),1),c("span",De,p((s=e.teamA)==null?void 0:s.score)+" - "+p((R=e.teamB)==null?void 0:R.score),1),c("span",Pe,p(e.$helpers.addDots((M=e.teamB)==null?void 0:M.name)),1)]}),_:1}))]}),_:1})])}const Ne=O(xe,[["render",Ee]]);function C(e){const t=D(e.value);return q(()=>e.value,a=>{v.to(t,{duration:.5,value:a,roundProps:{value:1},ease:"power2.inOut"})}),t}const Te=nodecg.Replicant("predictionStore",P),I=T("prediction",{state:()=>({predictionStore:null})}),Be=B([Te],I),Ae=g({name:"OmnibarPredictions",components:{FittedContent:x},setup(){const e=I(),t=l(()=>{var s;return(s=e.predictionStore.currentPrediction)==null?void 0:s.outcomes[0]}),a=l(()=>{var s;return(s=e.predictionStore.currentPrediction)==null?void 0:s.outcomes[1]}),d=l(()=>{var s,R;return(((s=t.value)==null?void 0:s.pointsUsed)??0)+(((R=a.value)==null?void 0:R.pointsUsed)??0)});function r(s){return s===0||!s?0:Math.round(s/d.value*100)}const m=l(()=>{var s;return r((s=t.value)==null?void 0:s.pointsUsed)}),o=l(()=>{var s;return r((s=a.value)==null?void 0:s.pointsUsed)}),i=C(m),n=C(o),u=C(l(()=>{var s;return((s=t.value)==null?void 0:s.pointsUsed)??0})),h=C(l(()=>{var s;return((s=a.value)==null?void 0:s.pointsUsed)??0}));return{addDots:G,firstOutcome:t,secondOutcome:a,firstOutcomePercentage:m,secondOutcomePercentage:o,tweenedFirstOutcomePercentage:i,tweenedSecondOutcomePercentage:n,tweenedFirstOutcomePointsUsed:u,tweenedSecondOutcomePointsUsed:h,padNumber:W.padNumber}}});const ke={class:"lower-third-predictions"},Ie={class:"first-outcome"},Me={class:"subtext"},Ue={class:"total-points"},Le={class:"percentage-text"},Fe={class:"second-outcome"},qe={class:"subtext"},Ve={class:"percentage-text"},We={class:"total-points"};function He(e,t,a,d,r,m){const o=b("fitted-content");return _(),$("div",ke,[c("div",Ie,[w(o,{"max-width":550,class:"team-name",align:"right"},{default:f(()=>{var i;return[S(p(e.addDots((i=e.firstOutcome)==null?void 0:i.title)),1)]}),_:1}),c("div",Me,[c("span",Ue,p(e.tweenedFirstOutcomePointsUsed)+"p",1),S(" / "),c("span",Le,p(e.padNumber(e.tweenedFirstOutcomePercentage,2))+"%",1)]),c("div",{class:"percentage-bar",style:U({width:`${e.firstOutcomePercentage}%`})},null,4)]),c("div",Fe,[w(o,{"max-width":550,class:"team-name"},{default:f(()=>{var i;return[S(p(e.addDots((i=e.secondOutcome)==null?void 0:i.title)),1)]}),_:1}),c("div",qe,[c("span",Ve,p(e.padNumber(e.tweenedSecondOutcomePercentage,2))+"%",1),S(" / "),c("span",We,p(e.tweenedSecondOutcomePointsUsed)+"p",1)]),c("div",{class:"percentage-bar",style:U({width:`${e.secondOutcomePercentage}%`})},null,4)])])}const ze=O(Ae,[["render",He]]),z=e=>(Y("data-v-d94f37cc"),e=e(),J(),e),je={class:"event-info"},Ge={key:0},Ke=z(()=>c("span",{class:"highlight"},"HP for Heroes",-1)),Ye={key:1,class:"location"},Je=z(()=>c("span",{class:"highlight"},"!donate",-1)),Qe=g({__name:"OmnibarEventIntro",setup(e){const t=D(!1);return K(()=>{setTimeout(()=>{t.value=!0},7500)}),(a,d)=>(_(),$("div",je,[w(E,{mode:"default"},{default:f(()=>[t.value?(_(),$("span",Ye,[S(" Support the cause - "),Je])):(_(),$("span",Ge,[S("You are watching "),Ke]))]),_:1})]))}});const Xe=O(Qe,[["__scopeId","data-v-d94f37cc"]]),N=400,Ze=g({__name:"OmnibarSlideTitle",props:{text:{}},setup(e){const t=e;let a=0;function d(o,i){if(t.text==null)a=0,v.to(o,{opacity:0,duration:.35,onComplete:i});else{const n=o.querySelector(".text-content");a=Math.min(n.querySelector("div").getBoundingClientRect().width,N),v.to(n,{opacity:0,duration:.35,onComplete:i})}}function r(o){a===0?v.set(o,{opacity:0}):(v.set(o,{width:a}),v.set(o.querySelector(".text-content"),{opacity:0}))}function m(o,i){const n=Math.min(o.querySelector(".text-content > div").getBoundingClientRect().width,N);a===0?(v.set(o,{width:n}),v.to(o,{opacity:1,duration:.35,onComplete:i})):(v.to(o,{duration:.5,ease:"power2.inOut",width:n}),v.to(o.querySelector(".text-content"),{opacity:1,duration:.35,delay:.35,onComplete:i}))}return(o,i)=>(_(),y(V,{css:!1,mode:"out-in",onLeave:d,onEnter:m,onBeforeEnter:r},{default:f(()=>[t.text!=null?(_(),$("div",{key:t.text,class:"omnibar-slide-title"},[w(x,{class:"text-content","max-width":N},{default:f(()=>[S(p(t.text),1)]),_:1})])):Q("",!0)]),_:1}))}});const et=O(Ze,[["__scopeId","data-v-31d5ce8a"]]),tt=g({__name:"DonationTotal",props:{maxWidth:{}},setup(e){const t=e,a=D(1e3),d=C(a),r=l(()=>d.value.toLocaleString("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}));return(m,o)=>(_(),y(x,{"max-width":t.maxWidth,class:"donation-total",align:"center"},{default:f(()=>[S(p(r.value),1)]),_:1},8,["max-width"]))}});const nt=O(tt,[["__scopeId","data-v-1cd6dbcd"]]),ot=g({name:"Omnibar",components:{DonationTotal:nt,OmnibarMusic:ve,OmnibarNextRound:ye,OmnibarActiveRound:Ne,OmnibarPredictions:ze,OmnibarEventIntro:Xe,OmnibarSlideTitle:et},setup(){const e=H(),t=k(),a=A(),d=I(),r=X(),m=l(()=>{var u;const n=d.predictionStore.currentPrediction;return((u=d.predictionStore.status)==null?void 0:u.predictionsEnabled)&&((n==null?void 0:n.status)==="ACTIVE"||(n==null?void 0:n.status)==="LOCKED")}),o=ce([{component:"OmnibarEventIntro",duration:15},{component:"OmnibarMusic",enabled:l(()=>a.musicShown),duration:15},{component:"OmnibarNextRound",enabled:l(()=>t.nextRound.showOnStream)},{component:"OmnibarActiveRound",enabled:l(()=>{var n;return!t.nextRound.showOnStream&&(r.obsData.status!=="CONNECTED"||r.activeBreakScene!=="stages"||!(((n=r.obsData.currentScene)==null?void 0:n.toLowerCase().includes("roster"))??!1))})},{component:"OmnibarPredictions",enabled:m}]);return nodecg.listenFor("showPredictionData",P,()=>{o.forceSetSlide("OmnibarPredictions")}),{slideTitle:l(()=>{switch(o.activeComponent.value){case"OmnibarMusic":return"Music";case"OmnibarNextRound":return`Next: ${t.nextRound.name}`;case"OmnibarActiveRound":return`Now: ${e.activeRound.match.name}`;case"OmnibarPredictions":return"Predictions";default:return null}}),activeSlide:o.activeComponent,slideLeave(n,u){v.to(n,{y:15,opacity:0,ease:"power2.in",duration:.5,onComplete:u})},beforeSlideEnter(n){v.set(n,{y:-15,opacity:0})},slideEnter(n,u){v.to(n,{y:0,opacity:1,ease:"power2.out",duration:.5,onComplete:u})}}}});const st={class:"omnibar-wrapper"},at={class:"omnibar-content"},it={class:"omnibar-logo-wrapper"},ct=c("img",{class:"tournament-logo",src:ae},null,-1),rt={class:"omnibar-slides"},dt={class:"slide-content"};function ut(e,t,a,d,r,m){const o=b("donation-total"),i=b("omnibar-slide-title");return _(),$("div",st,[c("div",at,[c("div",it,[ct,w(o,{"max-width":135})]),c("div",rt,[w(i,{class:"slide-title",text:e.slideTitle},null,8,["text"]),c("div",dt,[w(V,{mode:"out-in",onLeave:e.slideLeave,onEnter:e.slideEnter,onBeforeEnter:e.beforeSlideEnter},{default:f(()=>[(_(),y(Z(e.activeSlide)))]),_:1},8,["onLeave","onEnter","onBeforeEnter"])])])])])}const lt=O(ot,[["render",ut]]);(async()=>{const e=ee(lt);te(e),e.use(ne()),await se(),await ie(),await le(),await Be(),await he(),await oe(),e.mount("#app")})();
